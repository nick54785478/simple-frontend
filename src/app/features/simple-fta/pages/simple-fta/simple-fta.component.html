<p-card
  header="故障樹分析 (Fault Tree Analysis)"
  subheader="客戶測試階段發現異常電流問題"
>
  <form [formGroup]="formGroup">
    <div class="card grid p-fluid" #contentElement>
      <div class="col-12 md:col-3 lg:col-3">
        <label class="required">根事件</label>
        <p-dropdown
          [options]="eventList"
          optionLabel="label"
          optionValue="value"
          placeholder="Please select"
          [filter]="true"
          filterBy="value"
          [showClear]="true"
          [ngClass]="{ 'ng-dirty': formControlInvalid('rootEvent') }"
          appendTo="body"
          formControlName="rootEvent"
          (onChange)="onRootEventChange($event)"
        >
        </p-dropdown>
        <!-- <input
          type="text"
          [ngClass]="{ 'ng-dirty': formControlInvalid('title') }"
          pInputText
          formControlName="title"
        /> -->
        <div *ngIf="formControlInvalid('title')">
          <small
            class="p-error"
            *ngIf="formControl('title').errors?.['required']"
          >
            資料不能為空
          </small>
        </div>
      </div>
    </div>
    <div class="grid p-fluid justify-content-end">
      <div class="col-12 md:col-3 lg:col-2">
        <button type="button" pButton label="儲存" (click)="save()"></button>
      </div>
      <div class="col-12 md:col-3 lg:col-2">
        <button
          type="button"
          class="p-button-secondary p-button-outlined"
          pButton
          label="取消"
          (click)="cancel()"
        ></button>
      </div>
    </div>
  </form>
  <hr />
  <p-panel header="編輯器" toggleable="true" toggler="header">
    <!-- Fault Tree 編輯器 -->
    <p-tree
      [value]="ftaData"
      selectionMode="single"
      [(selection)]="selectedNode"
      [contextMenu]="cm"
    >
    </p-tree>

    <p-contextMenu #cm [model]="menuItems" appendTo="body"> </p-contextMenu>
  </p-panel>
  <hr />

  <!-- Fault Tree 展示 -->
  <p-organizationChart [value]="ftaData"></p-organizationChart>
</p-card>
